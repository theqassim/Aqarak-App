<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Ø¹Ù‚Ø§Ø±Ùƒ - Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1c2630">
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8686960539652604" crossorigin="anonymous"></script>
    <style>
    /* --- ğŸ¨ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª --- */
    :root { --glass-bg: rgba(20, 20, 20, 0.98); --neon-primary: #00ff88; --neon-secondary: #00d4ff; --card-bg: #1a1a1a; }
    body { background-color: #0f0f0f; background-image: radial-gradient(circle at 50% 0%, #1a2c25 0%, #0f0f0f 70%); min-height: 100vh; margin: 0 !important; padding: 0 !important; font-family: 'Cairo', sans-serif; overflow-x: hidden; }

    /* --- ğŸ“± Ù‡ÙŠØ¯Ø± Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ Ø§Ù„Ø°ÙƒÙŠ --- */
    .mobile-header-custom {
        display: none;
        position: fixed; top: 0; left: 0; right: 0;
        height: 70px;
        background: rgba(12, 12, 12, 0.98);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        z-index: 9999;
        padding: 0 20px;
        align-items: center;
        justify-content: space-between;
        box-shadow: 0 5px 25px rgba(0,0,0,0.8);
        transition: transform 0.3s ease-in-out;
    }
    
    .header-hidden { transform: translateY(-100%); }

    /* Ø§Ù„Ù„ÙˆØ¬Ùˆ (ÙŠÙ…ÙŠÙ†) */
    .mob-logo-link img { width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--neon-primary); box-shadow: 0 0 10px rgba(0, 255, 136, 0.2); }

    /* --- ğŸ”’ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† (Add + Menu) --- */
    .center-action { position: absolute; left: 50%; transform: translateX(-50%); }
    .btn-add-prop-mob { width: 45px; height: 45px; border-radius: 50%; background: linear-gradient(135deg, #00ff88, #00cc6a); color: black; border: 2px solid #00ff88; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; box-shadow: 0 0 15px rgba(0, 255, 136, 0.4); text-decoration: none; transition: 0.3s; }
    .btn-add-prop-mob:active { transform: scale(0.9); }

    .menu-toggle-btn { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); width: 42px; height: 42px; border-radius: 12px; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.3s; color: var(--neon-secondary); font-size: 1.3rem; }

    /* --- ğŸ‘¤ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø²ÙˆØ§Ø± (Guest Buttons) --- */
    .guest-buttons-container {
        display: flex; gap: 10px; align-items: center;
    }
    .btn-guest-login {
        background: transparent; border: 1px solid var(--neon-primary); color: var(--neon-primary);
        padding: 6px 15px; border-radius: 20px; font-size: 0.85rem; text-decoration: none; font-weight: bold;
    }
    .btn-guest-signup {
        background: var(--neon-primary); color: black; border: 1px solid var(--neon-primary);
        padding: 6px 15px; border-radius: 20px; font-size: 0.85rem; text-decoration: none; font-weight: bold;
    }

    /* Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© */
    .mobile-dropdown { display: none; position: fixed; top: 80px; left: 20px; width: 260px; background: #151515; border: 1px solid var(--neon-secondary); border-radius: 16px; padding: 15px; z-index: 10000; box-shadow: 0 10px 50px rgba(0,0,0,0.95); animation: slideIn 0.25s ease-out; }
    .dropdown-user-info { border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding-bottom: 10px; margin-bottom: 10px; text-align: center; }
    .dropdown-link { display: flex; align-items: center; gap: 12px; padding: 12px; color: #ddd; text-decoration: none; border-radius: 10px; font-size: 0.95rem; margin-bottom: 5px; transition: 0.2s; }
    .dropdown-link:hover { background: rgba(0, 212, 255, 0.1); color: var(--neon-secondary); }
    @keyframes slideIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

    @media (max-width: 768px) {
        .main-header { display: none !important; }
        .mobile-header-custom { display: flex !important; }
        body { padding-top: 70px; }
        .search-bar-container { flex-direction: column; }
        .search-button { display: none; }
        .search-bar { border-radius: 50px !important; }
    }

    /* --- Ø¨Ø§Ù‚ÙŠ Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª --- */
    .main-header { position: sticky; top: 0; z-index: 1000; background: var(--glass-bg); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(255, 255, 255, 0.1); padding: 10px 15px; }
    .header-container { display: flex; justify-content: space-between; align-items: center; max-width: 1250px; margin: 0 auto; }
    .logo-container { display: flex; align-items: center; gap: 10px; color: white; font-weight: bold; font-size: 1.1rem; }
    .logo { height: 40px; width: 40px; object-fit: cover; border-radius: 50%; border: 2px solid var(--neon-primary); }
    .main-nav { display: flex; gap: 10px; }
    .nav-button { background: transparent; color: #ddd; text-decoration: none; padding: 8px 15px; border-radius: 50px; border: 1px solid #444; font-size: 0.85rem; }
    .sell-btn { background: var(--neon-primary) !important; color: black !important; padding: 8px 20px; border-radius: 50px; font-weight: bold; text-decoration: none; }

    .search-section { padding: 30px 15px; text-align: center; max-width: 800px; margin: 0 auto; }
    .search-bar-container { position: relative; display: flex; gap: 10px; }
    .search-bar { width: 100%; padding: 15px 25px; background: rgba(0,0,0,0.6); border: 1px solid #444; border-radius: 50px; color: white; font-size: 1rem; }
    .search-button { background: var(--neon-secondary); color: #000; border: none; padding: 0 25px; border-radius: 50px; font-weight: bold; cursor: pointer; }
    .listings-section { max-width: 1250px; margin: 0 auto; padding: 0 15px 40px 15px; }
    .section-title { color: var(--neon-primary); margin-bottom: 20px; border-right: 4px solid var(--neon-primary); padding-right: 15px; font-size: 1.5rem; }
    .adv-grid-container { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 25px; }
    .adv-card { background: var(--card-bg); border-radius: 16px; overflow: hidden; border: 1px solid #333; transition: 0.3s; position: relative; display: flex; flex-direction: column; }
    .adv-card-img-box { height: 220px; position: relative; }
    .adv-card-img { width: 100%; height: 100%; object-fit: cover; }
    .adv-price-tag { position: absolute; bottom: 10px; left: 10px; background: rgba(0,0,0,0.85); color: var(--neon-primary); padding: 5px 12px; border-radius: 8px; font-weight: bold; border: 1px solid var(--neon-primary); }
    .adv-type-badge { position: absolute; top: 10px; left: 10px; padding: 5px 10px; border-radius: 6px; font-weight: bold; font-size: 0.8rem; color: black; }
    .is-sale { background: #00ff88; } .is-rent { background: #00d4ff; }
    .adv-card-body { padding: 15px; }
    .adv-title { color: white; margin: 0 0 12px 0; font-size: 1.1rem; line-height: 1.4; height: 3rem; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
    .adv-features { display: flex; gap: 15px; color: #bbb; font-size: 0.85rem; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 12px; }
    .adv-feat-item i { color: var(--neon-secondary); margin-left: 5px; }
    .adv-details-btn { display: block; width: 100%; text-align: center; border: 1px solid var(--neon-primary); color: var(--neon-primary); padding: 10px; border-radius: 8px; text-decoration: none; font-weight: bold; font-size: 0.95rem; background: transparent; }
    .load-more-btn { background: transparent; color: white; border: 1px solid #555; padding: 12px 40px; border-radius: 50px; margin-top: 30px; cursor: pointer; }
    .featured-card-glow { border: 2px solid #FFD700 !important; box-shadow: 0 0 25px rgba(255, 215, 0, 0.25); position: relative; transform: scale(1.02); z-index: 5; background: linear-gradient(145deg, #1a1a1a, #2a2a2a) !important; }
    .featured-crown { position: absolute; top: 10px; right: 10px; background: linear-gradient(45deg, #FFD700, #FFA500, #FFD700); background-size: 200% 200%; color: black; font-weight: 900; padding: 6px 12px; border-radius: 8px; font-size: 0.85rem; box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5); z-index: 10; display: flex; align-items: center; gap: 6px; border: 1px solid #fff; }
    .complaint-float-btn { position: fixed; bottom: 20px; left: 20px; background: rgba(255, 68, 68, 0.1); color: #ff4444; border: 1px solid #ff4444; padding: 10px 20px; border-radius: 50px; font-weight: bold; cursor: pointer; z-index: 9999; backdrop-filter: blur(5px); }
    .popup-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 99999; justify-content: center; align-items: center; backdrop-filter: blur(4px); }
    .popup-content { background: #121212; padding: 40px; border-radius: 20px; text-align: center; width: 90%; max-width: 450px; border: 1px solid #333; box-shadow: 0 20px 50px rgba(0,0,0,0.8); color: #fff; }
    </style>
</head>
<body>

    <header class="mobile-header-custom" id="mob-header">
        
        <a href="home" class="mob-logo-link">
            <img src="logo.png" alt="Ø¹Ù‚Ø§Ø±Ùƒ">
        </a>

        <div id="mob-center-action" class="center-action" style="display:none;">
            <a href="seller-dashboard" class="btn-add-prop-mob" title="Ø£Ø¶Ù Ø¹Ù‚Ø§Ø±Ùƒ">
                <i class="fas fa-plus"></i>
            </a>
        </div>

        <div id="mob-menu-toggle" class="menu-toggle-btn" onclick="toggleMobileMenu()" style="display:none;">
            <i class="fas fa-bars"></i>
        </div>

        <div id="mob-guest-btns" class="guest-buttons-container" style="display:none;">
            <a href="index" class="btn-guest-login">Ø¯Ø®ÙˆÙ„</a>
            <a href="index" class="btn-guest-signup">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a>
        </div>

        <div id="mobile-profile-dropdown" class="mobile-dropdown">
            <div class="dropdown-user-info">
                <strong style="color:white; display:block; font-size:1.1rem;" id="mob-user-name">...</strong>
                <span style="font-size:0.8rem; color:#00ff88;" id="mob-user-balance"></span>
            </div>
            <a href="user-dashboard" class="dropdown-link"><i class="fas fa-user-circle"></i> Ø­Ø³Ø§Ø¨ÙŠ</a>
            <a href="all-properties" class="dropdown-link"><i class="fas fa-building"></i> Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</a>
            <a href="all-properties.html?type=buy" class="dropdown-link"><i class="fas fa-key"></i> Ø¹Ù‚Ø§Ø±Ø§Øª Ù„Ù„Ø¨ÙŠØ¹</a>
            <a href="all-properties.html?type=rent" class="dropdown-link"><i class="fas fa-door-open"></i> Ø¹Ù‚Ø§Ø±Ø§Øª Ù„Ù„Ø§ÙŠØ¬Ø§Ø±</a>
            <a href="#" onclick="logoutUser()" class="dropdown-link" style="color:#ff4444;"><i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬</a>
        </div>
    </header>

    <header class="main-header">
        <div class="header-container">
            <div class="logo-container">
                <img src="logo.png" alt="Ø´Ø¹Ø§Ø± Ø¹Ù‚Ø§Ø±Ùƒ" class="logo">
                <span class="logo-text">Ø¹Ù‚Ø§Ø±Ùƒ Ù…Ø¶Ù…ÙˆÙ†!</span>
            </div>
            <nav class="main-nav" id="dynamic-nav"></nav>
        </div>
    </header>

    <main class="main-content">
        <section class="search-section" id="hero-search-section">
            <div class="search-bar-container">
                <input type="text" class="search-bar neon-input-white" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù‚Ø§Ø±Ùƒ (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø³Ø¹Ø±ØŒ Ø§Ù„ØºØ±Ù)...">
                <button class="search-button"><i class="fas fa-search"></i> Ø§Ø¨Ø­Ø«</button>
            </div>
        </section>
        <section class="listings-section">
            <h2 class="section-title">Ø£Ø­Ø¯Ø« Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</h2>
            <div class="listings-container" id="listings-container"></div>
        </section>
        <section class="request-property-section">
            <div class="request-box neon-glow centered-page-content" style="text-align:center; padding:40px; border:1px solid var(--neon-secondary); border-radius:15px; margin-top:20px; background:rgba(0, 212, 255, 0.05);">
                <p class="request-text" style="color:white; font-size:1.2rem; margin-bottom:15px;">Ù„Ù… ØªØ¬Ø¯ Ø§Ù„Ø¹Ù‚Ø§Ø± Ø§Ù„Ø°ÙŠ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡ØŸ</p>
                <a href="request-property" class="sell-btn" style="background:var(--neon-secondary)!important; color:black!important; border-color:var(--neon-secondary)!important;">Ø§Ø­Ø¬Ø² Ø¹Ù‚Ø§Ø±Ùƒ Ø§Ù„Ø¢Ù†!</a>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="footer-content" style="text-align:center; padding:20px; color:#777; font-size:0.9rem;">
            <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025 - Ø¹Ù‚Ø§Ø±Ùƒ</p>
        </div>
    </footer>

    <button onclick="openComplaintModal()" class="complaint-float-btn">
        <i class="fas fa-exclamation-circle"></i> Ø´ÙƒÙˆÙ‰ØŸ
    </button>

    <div id="complaint-modal" class="popup-overlay">
        <div class="popup-content neon-glow" style="max-width: 400px; border-color: #ff4444;">
            <span class="close-btn" onclick="closeComplaintModal()" style="position:absolute; top:10px; left:15px; cursor:pointer; font-size:1.5rem;">&times;</span>
            <h3 style="color: white; margin-bottom: 15px;">Ø¥Ø±Ø³Ø§Ù„ Ø´ÙƒÙˆÙ‰</h3>
            <form id="user-complaint-form">
                <textarea id="complaint-text" style="width:100%; padding:10px; background:#222; color:white; border:1px solid #555; border-radius:10px; margin-bottom:10px;" rows="4" placeholder="Ø§ÙƒØªØ¨ Ø§Ù„ØªÙØ§ØµÙŠÙ„..." required></textarea>
                <button type="submit" class="sell-btn" style="width:100%; border-color:#ff4444!important; background:transparent!important; color:#ff4444!important;">Ø¥Ø±Ø³Ø§Ù„</button>
            </form>
        </div>
    </div>

    <script>
        function openComplaintModal() { document.getElementById('complaint-modal').style.display = 'flex'; }
        function closeComplaintModal() { document.getElementById('complaint-modal').style.display = 'none'; }
        document.getElementById('user-complaint-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = e.target.querySelector('button');
            const text = document.getElementById('complaint-text').value;
            btn.innerHTML = 'Ø¬Ø§Ø±ÙŠ...'; btn.disabled = true;
            try {
                const res = await fetch('/api/submit-complaint', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ content: text }) });
                const data = await res.json();
                if(res.ok) { alert('âœ… ' + data.message); closeComplaintModal(); } else alert(data.message);
            } catch(err) { alert('Ø®Ø·Ø£'); } finally { btn.innerHTML = 'Ø¥Ø±Ø³Ø§Ù„'; btn.disabled = false; }
        });

        let lastScrollTop = 0;
        const mobileHeader = document.getElementById('mob-header');
        window.addEventListener('scroll', function() {
            let scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            if (scrollTop > lastScrollTop && scrollTop > 70) { mobileHeader.classList.add('header-hidden'); } 
            else { mobileHeader.classList.remove('header-hidden'); }
            lastScrollTop = scrollTop;
        });
    </script>
    
    <script src="home.js"></script>
    <script src="search-handler.js"></script>
    <script src="ban-check.js"></script>
    <script src="global-alert.js"></script>
</body>
</html>