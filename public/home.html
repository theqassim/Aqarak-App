<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta name="description" content="Ø£ÙØ¶Ù„ Ù…Ù†ØµØ© Ø¹Ù‚Ø§Ø±ÙŠØ© ÙÙŠ Ù…ØµØ± Ù„Ø¹Ø±Ø¶ ÙˆØ·Ù„Ø¨ Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª Ù…Ø¬Ø§Ù†Ø§Ù‹." />
    <meta name="keywords" content="Ø¹Ù‚Ø§Ø±Ø§Øª Ù…ØµØ±, Ø´Ù‚Ù‚ Ù„Ù„Ø¨ÙŠØ¹, Ø§ÙŠØ¬Ø§Ø± Ø´Ù‚Ù‚, Ø¹Ù‚Ø§Ø±Ùƒ" />
    <title>Ø¹Ù‚Ø§Ø±Ùƒ - Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1c2630">
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="apple-touch-icon" href="logo.png">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8686960539652604" crossorigin="anonymous"></script>
    <script type="application/ld+json">
     {

  "@context": "https://schema.org",

  "@type": "RealEstateAgent",

  "name": "Ù…Ù†ØµØ© Ø¹Ù‚Ø§Ø±Ùƒ - Aqarak",

  "alternateName": ["Aqarak EG", "Ø´Ø±ÙƒØ© Ø¹Ù‚Ø§Ø±Ùƒ", "Aqarak Real Estate"],

  "url": "https://aqarakeg.com",

  "logo": "https://aqarakeg.com/logo.jpg",

  "image": "https://aqarakeg.com/logo.jpg",

  "description": "Ù…Ù†ØµØ© Ø¹Ù‚Ø§Ø±Ùƒ Ù‡ÙŠ Ø§Ù„ÙˆØ¬Ù‡Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ù„Ø¨ÙŠØ¹ ÙˆØ´Ø±Ø§Ø¡ ÙˆØ¥ÙŠØ¬Ø§Ø± Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª ÙÙŠ Ù…ØµØ± Ø¨Ø£Ù‚Ù„ Ø¹Ù…ÙˆÙ„Ø©. Ù†Ø­Ù† Ø´Ø±ÙƒØ© Ù…ØªØ®ØµØµØ© ÙÙŠ ØªÙˆÙÙŠØ± Ø­Ù„ÙˆÙ„ Ø¹Ù‚Ø§Ø±ÙŠØ© Ø°ÙƒÙŠØ© ÙˆØ³Ø±ÙŠØ¹Ø©.",

  "address": {

    "@type": "PostalAddress",

    "addressLocality": "Cairo",

    "addressCountry": "EG"

  },

  "priceRange": "$",

  "contactPoint": {

    "@type": "ContactPoint",

    "telephone": "+201008102237",

    "contactType": "customer service",

    "areaServed": "EG",

    "availableLanguage": ["Arabic"]

  },

  "sameAs": [

    "https://www.facebook.com/share/1ADgNDLXc6/",

    "https://www.instagram.com/aqarak.eg?igsh=eDN2d2tuNmxhazY5",

    "https://whatsapp.com/channel/0029Vb6YH08CxoAoe7aaSP38"

  ]

}
    </script>
    <style>
    /* --- ğŸ¨ 1. Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Ù†ÙØ³ ÙƒÙˆØ¯ All Properties) --- */
    :root {
        --glass-bg: rgba(20, 20, 20, 0.98);
        --neon-primary: #00ff88;  /* Ø§Ù„Ø£Ø®Ø¶Ø± Ø§Ù„Ù†ÙŠÙˆÙ† */
        --neon-secondary: #00d4ff; /* Ø§Ù„Ø£Ø²Ø±Ù‚ Ø§Ù„Ù†ÙŠÙˆÙ† */
        --card-bg: #1a1a1a;
        --text-main: #ffffff;
    }

    /* Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„ØµÙØ­Ø© ÙˆØ§Ù„Ø®Ù„ÙÙŠØ© */
    body {
        background-color: #0f0f0f;
        background-image: radial-gradient(circle at 50% 0%, #1a2c25 0%, #0f0f0f 70%);
        min-height: 100vh;
        margin: 0 !important;
        padding: 0 !important;
        font-family: 'Cairo', sans-serif;
        overflow-x: hidden;
    }

    /* --- 2. Ø§Ù„Ù‡ÙŠØ¯Ø± (Header) --- */
    .main-header {
        position: sticky;
        top: 0;
        z-index: 1000;
        background: var(--glass-bg);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        padding: 10px 15px;
        border-bottom-left-radius: 20px;
        border-bottom-right-radius: 20px;
    }

    .header-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        max-width: 1250px;
        margin: 0 auto;
    }

    .logo-container {
        display: flex;
        align-items: center;
        gap: 10px;
        color: white;
        font-weight: bold;
        font-size: 1.1rem;
    }
    
    /* âœ… ØªØ¹Ø¯ÙŠÙ„ 2: Ø¥ØµÙ„Ø§Ø­ Ø§Ù„Ù„ÙˆØ¬Ùˆ Ø§Ù„Ù…Ø¶ØºÙˆØ· */
    .logo { 
        height: 40px; 
        width: 40px; /* Ø¹Ø±Ø¶ Ø«Ø§Ø¨Øª Ù…Ø³Ø§ÙˆÙŠ Ù„Ù„Ø§Ø±ØªÙØ§Ø¹ */
        object-fit: cover; /* ÙŠÙ…Ù†Ø¹Ù…Ø· Ø§Ù„ØµÙˆØ±Ø© */
        border-radius: 50%; 
        border: 2px solid var(--neon-primary); /* Ø¥Ø¶Ø§ÙØ© Ø¥Ø·Ø§Ø± Ù†ÙŠÙˆÙ† Ø¬Ù…Ø§Ù„ÙŠ */
    }

    /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ù†Ø§ÙØ¨Ø§Ø± */
    .main-nav { display: flex; gap: 10px; flex-wrap: wrap; align-items: center;}
    
    .nav-button {
        background: transparent;
        color: #ddd;
        text-decoration: none;
        padding: 8px 15px;
        border-radius: 50px;
        border: 1px solid #444;
        font-size: 0.85rem;
        transition: 0.3s;
    }
    .nav-button:hover {
        border-color: var(--neon-primary);
        color: var(--neon-primary);
    }
    
    /* âœ… ØªØ¹Ø¯ÙŠÙ„ 3: Ø¥Ø¨Ø±Ø§Ø² Ø²Ø± "Ø§Ø¹Ø±Ø¶ Ø¹Ù‚Ø§Ø±Ùƒ" Ù„ÙŠÙƒÙˆÙ† ÙˆØ§Ø¶Ø­ Ø¬Ø¯Ø§Ù‹ */
    .sell-btn {
        background: var(--neon-primary) !important; /* Ø®Ù„ÙÙŠØ© ØµÙ„Ø¨Ø© Ù†ÙŠÙˆÙ† */
        color: #000000 !important; /* Ù†Øµ Ø£Ø³ÙˆØ¯ Ù„ØªØ¨Ø§ÙŠÙ† Ø¹Ø§Ù„ÙŠ */
        border: 1px solid var(--neon-primary) !important;
        padding: 8px 20px;
        border-radius: 50px;
        text-decoration: none;
        font-size: 0.9rem;
        font-weight: bold;
        box-shadow: 0 0 15px rgba(0, 255, 136, 0.4); /* ØªÙˆÙ‡Ø¬ */
        transition: 0.3s;
    }
    .sell-btn:hover {
        background: transparent !important; /* Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ… ÙŠØµØ¨Ø­ Ø´ÙØ§Ù */
        color: var(--neon-primary) !important;
        box-shadow: 0 0 25px rgba(0, 255, 136, 0.7);
    }

    /* --- 3. Ù‚Ø³Ù… Ø§Ù„Ø¨Ø­Ø« (Search Hero) --- */
    .search-section {
        padding: 30px 15px;
        text-align: center;
        max-width: 800px;
        margin: 0 auto;
    }

    .search-bar-container {
        position: relative;
        display: flex;
        gap: 10px;
    }

    .search-bar {
        width: 100%;
        padding: 15px 25px;
        background: rgba(0,0,0,0.6);
        border: 1px solid #444;
        border-radius: 50px; /* Ø­ÙˆØ§Ù Ø¯Ø§Ø¦Ø±ÙŠØ© ÙƒØ§Ù…Ù„Ø© */
        color: white;
        font-size: 1rem;
        transition: 0.3s;
    }
    .search-bar:focus {
        border-color: var(--neon-secondary);
        outline: none;
        box-shadow: 0 0 15px rgba(0, 212, 255, 0.2);
    }

    .search-button {
        background: var(--neon-secondary);
        color: #000;
        border: none;
        padding: 0 25px;
        border-radius: 50px;
        font-weight: bold;
        cursor: pointer;
        white-space: nowrap;
        transition: 0.3s;
    }
    .search-button:hover { box-shadow: 0 0 15px rgba(0, 212, 255, 0.6); }

    /* --- 4. Ø´Ø¨ÙƒØ© Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª (Grid System) --- */
    .listings-section {
        max-width: 1250px;
        margin: 0 auto;
        padding: 0 15px 40px 15px;
    }

    .section-title {
        color: var(--neon-primary);
        margin-bottom: 20px;
        border-right: 4px solid var(--neon-primary);
        padding-right: 15px;
        font-size: 1.5rem;
    }

    .adv-grid-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 25px;
    }

    /* ØªØµÙ…ÙŠÙ… Ø§Ù„ÙƒØ§Ø±Øª Ø§Ù„Ù…ÙˆØ­Ø¯ */
    .adv-card {
        background: var(--card-bg); border-radius: 16px; overflow: hidden;
        border: 1px solid #333; transition: 0.3s; position: relative;
        display: flex; flex-direction: column;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    }
    .adv-card:hover { transform: translateY(-7px); border-color: var(--neon-primary); box-shadow: 0 15px 40px rgba(0, 255, 136, 0.2); }
    
    /* âœ… ØªØ¹Ø¯ÙŠÙ„ 2 (ØªØ§Ø¨Ø¹): Ø²ÙŠØ§Ø¯Ø© Ø§Ø±ØªÙØ§Ø¹ ØµÙˆØ±Ø© Ø§Ù„ÙƒØ§Ø±Øª Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
    .adv-card-img-box { height: 220px; position: relative; }
    .adv-card-img { width: 100%; height: 100%; object-fit: cover; }
    
    .adv-price-tag { 
        position: absolute; bottom: 10px; left: 10px; 
        background: rgba(0,0,0,0.85); color: var(--neon-primary); 
        padding: 5px 12px; border-radius: 8px; 
        font-weight: bold; border: 1px solid var(--neon-primary); 
        font-size: 1rem; 
    }
    
    .adv-type-badge { 
        position: absolute; top: 10px; left: 10px; 
        padding: 5px 10px; border-radius: 6px; 
        font-weight: bold; font-size: 0.8rem; color: black; box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    }
    .is-sale { background: #00ff88; } 
    .is-rent { background: #00d4ff; }
    
    .adv-card-body { padding: 15px; }
    .adv-title { color: white; margin: 0 0 12px 0; font-size: 1.1rem; line-height: 1.4; height: 3rem; overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
    
    .adv-features { 
        display: flex; gap: 15px; color: #bbb; 
        font-size: 0.85rem; margin-bottom: 15px; 
        border-bottom: 1px solid #333; padding-bottom: 12px; 
    }
    .adv-feat-item i { color: var(--neon-secondary); margin-left: 5px; }
    
    .adv-details-btn { 
        display: block; width: 100%; text-align: center; 
        border: 1px solid var(--neon-primary); color: var(--neon-primary); 
        padding: 10px; border-radius: 8px; text-decoration: none; 
        font-weight: bold; font-size: 0.95rem; transition: 0.3s;
        background: transparent;
    }
    .adv-details-btn:hover { background: var(--neon-primary); color: black; }

    /* Ø²Ø± Ø¹Ø±Ø¶ Ø§Ù„Ù…Ø²ÙŠØ¯ */
    .load-more-btn {
        background: transparent; color: white; border: 1px solid #555;
        padding: 12px 40px; border-radius: 50px; margin-top: 30px;
        cursor: pointer; transition: 0.3s; font-size: 1rem;
    }
    .load-more-btn:hover { border-color: var(--neon-primary); color: var(--neon-primary); box-shadow: 0 0 20px rgba(0, 255, 136, 0.3); }

    /* --- ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ --- */
    @media (max-width: 768px) {
        .adv-grid-container { grid-template-columns: 1fr; gap: 20px; }
        
        /* âœ… ØªØ¹Ø¯ÙŠÙ„ 1: Ø¥Ø®ÙØ§Ø¡ Ø²Ø± Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ù…ÙˆØ¨Ø§ÙŠÙ„ */
        .search-bar-container { flex-direction: column; }
        .search-button { display: none; /* Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø²Ø± ØªÙ…Ø§Ù…Ø§Ù‹ */ }
        .search-bar { border-radius: 50px !important; /* Ø§Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø¯Ø§Ø¦Ø±ÙŠØ© Ø§Ù„Ø­ÙˆØ§Ù */ }

        .header-container { flex-direction: column; gap: 15px; }
        .main-nav { justify-content: center; width: 100%; gap: 8px; }
        .nav-button, .sell-btn { flex-grow: 1; text-align: center; padding: 8px 5px; font-size: 0.8rem;}
        .logo-container { justify-content: center; }
    }

    /* --- Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¹Ø§Ø¦Ù…Ø© (Popup, Chatbot) --- */
    /* (Ø§Ø­ØªÙØ¸ Ø¨Ù†ÙØ³ Ø§Ù„Ø³ØªØ§ÙŠÙ„Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù€ Chatbot ÙˆØ§Ù„Ù€ Popup Ù‡Ù†Ø§) */
</style>
</head>
<body>

        <header class="main-header">
        <div class="header-container">
            <div class="logo-container">
                <img src="logo.png" alt="Ø´Ø¹Ø§Ø± Ø¹Ù‚Ø§Ø±Ùƒ" class="logo">
                <span class="logo-text">Ø¹Ù‚Ø§Ø±Ùƒ Ù…Ø¶Ù…ÙˆÙ†!</span>
            </div>
            <nav class="main-nav" id="dynamic-nav">
                </nav>
        </div>
    </header>


    <main class="main-content">
        <section class="search-section">
            <div class="search-bar-container">
                <input type="text" class="search-bar neon-input-white" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¹Ù‚Ø§Ø±Ùƒ (Ø§Ù„Ø§Ø³Ù…ØŒ Ø§Ù„Ø³Ø¹Ø±ØŒ Ø§Ù„ØºØ±Ù)...">
                <button class="search-button"><i class="fas fa-search"></i> Ø§Ø¨Ø­Ø«</button>
            </div>
        </section>

        <section class="listings-section">
            <h2 class="section-title">Ø£Ø­Ø¯Ø« Ø§Ù„Ø¹Ù‚Ø§Ø±Ø§Øª</h2>
            <div class="listings-container" id="listings-container"></div>
        </section>
        
        <section class="request-property-section">
            <div class="request-box neon-glow centered-page-content">
                <p class="request-text">Ù„Ù… ØªØ¬Ø¯ Ø§Ù„Ø¹Ù‚Ø§Ø± Ø§Ù„Ø°ÙŠ ØªØ¨Ø­Ø« Ø¹Ù†Ù‡ØŸ</p>
                <a href="request-property" class="btn-neon-large">Ø§Ø­Ø¬Ø² Ø¹Ù‚Ø§Ø±Ùƒ Ø§Ù„Ø¢Ù†!</a>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <div class="footer-content">
            <div class="social-links">
                <a href="https://www.facebook.com/share/17H591aR7r/" target="_blank"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.instagram.com/aqarak.eg?igsh=ZHZhd2U0NTg4MzAy" target="_blank"><i class="fab fa-instagram"></i></a>
                <a href="https://whatsapp.com/channel/0029Vb6YH08CxoAoe7aaSP38" target="_blank"><i class="fab fa-whatsapp"></i></a>
            </div>
            <p class="contact-info">ØªÙˆØ§ØµÙ„ÙˆØ§ Ù…Ø¹Ù†Ø§!</p>
            <p>Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© 2025 - Ø¹Ù‚Ø§Ø±Ùƒ</p>
        </div>
    </footer>

    <div id="install-toast" class="install-toast" style="display: none;">
        <div class="install-content">
            <img src="logo.jpg" alt="Aqarak Logo" class="install-logo">
            <div class="install-text">
                <span class="app-name">ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù‚Ø§Ø±Ùƒ</span>
                <span class="app-desc">ØªØ¬Ø±Ø¨Ø© Ø£Ø³Ø±Ø¹ ÙˆØ£Ø³Ù‡Ù„</span>
            </div>
        </div>
        <div class="install-actions">
            <button id="install-btn-action" class="btn-install-mini">ØªØ«Ø¨ÙŠØª</button>
            <button id="close-install" class="btn-close-mini"><i class="fas fa-times"></i></button>
        </div>
    </div>

    <div id="ios-install-prompt" class="ios-prompt" style="display: none;">
        <div class="ios-prompt-content">
            <span class="close-ios" onclick="closeIosPrompt()">&times;</span>
            <p style="margin: 0; font-weight: bold; font-size: 0.9rem;">ØªØ«Ø¨ÙŠØª ØªØ·Ø¨ÙŠÙ‚ Ø¹Ù‚Ø§Ø±Ùƒ ğŸ“±</p>
            <p style="margin: 5px 0 0; font-size: 0.85rem; color: #ddd;">Ø§Ø¶ØºØ· Ù…Ø´Ø§Ø±ÙƒØ© <i class="fas fa-share-square"></i> Ø«Ù… Ø¥Ø¶Ø§ÙØ© Ù„Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©.</p>
        </div>
        <div class="ios-arrow"></div>
    </div>

    <div id="promoPopup" class="popup-overlay">
      <div class="popup-content">
        <div class="news-header">Ø¹Ù‚Ø§Ø±Ùƒ</div>
        <div class="sub-text">Ø§Ø³ØªÙ…ØªØ¹ Ø¨ØªØ¬Ø±Ø¨Ø© Ø¨ÙŠØ¹ ÙˆØ´Ø±Ø§Ø¡ Ø¹Ù‚Ø§Ø±ÙŠØ© Ù…Ø®ØªÙ„ÙØ©</div>
        <div class="glowing-box"><h3>Ø®Ø¯Ù…Ø© Ù…Ø¬Ø§Ù†ÙŠØ© 100%</h3><p>Ø¨Ø¯ÙˆÙ† Ø±Ø³ÙˆÙ…</p></div>
        <button class="action-btn" onclick="closePopup()">ØªØµÙØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¢Ù†</button>
        <label class="checkbox-container"><input type="checkbox" id="dontShowAgain"> Ø¹Ø¯Ù… Ø§Ù„Ø¹Ø±Ø¶ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰</label>
      </div>
    </div>

    <button class="chatbot-toggler" onclick="toggleChat()">
        <i class="fas fa-robot"></i>
    </button>

    <div class="chatbot-window" id="chatbotWindow">
        <div class="chatbot-header">
            <div class="header-info">
                <img src="logo.png" alt="Logo" style="width: 30px; border-radius: 50%;">
                <div class="header-text">
                    <h4>Ù…Ø³Ø§Ø¹Ø¯ Ø¹Ù‚Ø§Ø±Ùƒ ğŸ </h4>
                    <p>Ù…ØªØ§Ø­ Ø§Ù„Ø¢Ù† Ù„Ù„Ù…Ø³Ø§Ø¹Ø¯Ø©</p>
                </div>
            </div>
            <span class="close-btn" onclick="toggleChat()">Ã—</span>
        </div>
        
        <ul class="chatbox" id="chatbox">
            <li class="chat incoming">
                <span class="bot-icon"><img src="logo.png" alt="Aqarak Bot"></span>
                <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ù…Ù†ØµØ© Ø¹Ù‚Ø§Ø±Ùƒ! ğŸ‘‹<br>Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ.. Ø§Ø®ØªØ± Ù…Ù† Ø§Ù„Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª ğŸ‘‡</p>
            </li>
        </ul>
        
        <div class="suggestions-container">
            <button class="suggestion-chip" onclick="sendSuggestion('ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŸ')">ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„Ù…ÙˆÙ‚Ø¹ØŸ</button>
            <button class="suggestion-chip" onclick="sendSuggestion('Ø§ÙŠÙ‡ Ø§Ù„Ø´Ù‚Ù‚ Ø§Ù„Ù…ØªØ§Ø­Ø©ØŸ')">Ø§ÙŠÙ‡ Ø§Ù„Ø´Ù‚Ù‚ Ø§Ù„Ù…ØªØ§Ø­Ø©ØŸ</button>
            <button class="suggestion-chip" onclick="sendSuggestion('Ø§Ø²Ø§ÙŠ Ø§ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø§Ù„ÙƒØŸ')">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙˆØ§ØµÙ„</button>
        </div>

        <div class="chat-input">
            <textarea id="userMessage" placeholder="Ø§ÙƒØªØ¨ Ø³Ø¤Ø§Ù„Ùƒ Ù‡Ù†Ø§..." required></textarea>
            <span id="micBtn" onclick="startVoiceInput()"><i class="fas fa-microphone"></i></span>
            <span id="sendBtn"><i class="fas fa-paper-plane"></i></span>
        </div>
    </div>

    <style>
        .popup-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 99999; justify-content: center; align-items: center; backdrop-filter: blur(4px); }
        .popup-content { background: #121212; padding: 40px; border-radius: 20px; text-align: center; width: 90%; max-width: 450px; border: 1px solid #333; box-shadow: 0 20px 50px rgba(0,0,0,0.8); animation: popIn 0.5s; color: #fff; }
        .news-header { color: #00ff41; font-size: 32px; font-weight: 900; margin-bottom: 15px; }
        .glowing-box { border: 2px solid #00e5ff; padding: 25px; margin: 20px 0; border-radius: 12px; background: radial-gradient(circle, rgba(0,229,255,0.1) 0%, transparent 70%); box-shadow: 0 0 20px rgba(0,229,255,0.4); }
        .glowing-box h3 { margin: 0; font-size: 42px; color: #fff; font-weight: bold; }
        .glowing-box p { margin: 5px 0 0; color: #00e5ff; font-size: 16px; font-weight: bold; }
        .action-btn { background: linear-gradient(135deg, #00ff41, #008cff); color: white; border: none; padding: 15px 50px; font-size: 18px; font-weight: bold; border-radius: 50px; cursor: pointer; margin-top: 10px; width: 100%; }
        .checkbox-container { margin-top: 15px; font-size: 14px; color: #aaa; display: flex; justify-content: center; gap: 8px; cursor: pointer; }
        @keyframes popIn { from { opacity: 0; transform: scale(0.5); } to { opacity: 1; transform: scale(1); } }

        /* Ø´Ø§Øª ÙŠÙ…ÙŠÙ† */
        .chatbot-toggler { position: fixed; bottom: 85px; right: 25px; left: auto; height: 60px; width: 60px; border-radius: 50%; background: #007bff; color: #fff; border: none; font-size: 28px; cursor: pointer; z-index: 99999; transition: transform 0.3s; box-shadow: 0 0 15px rgba(0,123,255,0.6); }
        .chatbot-toggler:hover { transform: scale(1.1); background: #0056b3; }
        .chatbot-window { position: fixed; right: 25px; left: auto; bottom: 155px; width: 90%; max-width: 450px; height: 75vh; max-height: 650px; background: #1c2630; border: 1px solid #333; border-radius: 15px; overflow: hidden; opacity: 0; pointer-events: none; transform: scale(0.5); transform-origin: bottom right; box-shadow: 0 0 30px rgba(0,0,0,0.5); transition: all 0.3s; z-index: 100000; font-family: 'Cairo', sans-serif; display: flex; flex-direction: column; }
        .chatbot-window.show-chat { opacity: 1; pointer-events: auto; transform: scale(1); }
        .chatbot-header { background: #0d141b; padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #333; flex-shrink: 0; }
        .header-info { display: flex; align-items: center; gap: 10px; }
        .header-text h4 { margin: 0; font-size: 1rem; color: #fff; }
        .header-text p { margin: 0; font-size: 0.7rem; color: #00ff41; }
        .close-btn { cursor: pointer; color: #fff; font-size: 1.5rem; }
        .chatbox { flex-grow: 1; overflow-y: auto; padding: 20px; list-style: none; margin: 0; background: #1c2630; }
        .chatbox .chat { display: flex; list-style: none; margin-bottom: 20px; }
        .chatbox .chat p { padding: 12px 16px; border-radius: 15px; max-width: 80%; font-size: 0.95rem; margin: 0; word-wrap: break-word; line-height: 1.6; }
        .chatbox .incoming .bot-icon { width: 35px; height: 35px; margin-left: 10px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; }
        .chatbox .incoming .bot-icon img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
        .chatbox .incoming p { background: #2c3e50; color: #fff; border-radius: 15px 0 15px 15px; }
        .chatbox .outgoing { justify-content: flex-end; }
        .chatbox .outgoing p { background: #007bff; color: #fff; border-radius: 0 15px 15px 15px; box-shadow: 0 2px 10px rgba(0, 123, 255, 0.2); }
        .chatbox a { color: #4facfe; text-decoration: underline; font-weight: bold; word-break: break-all; }
        .suggestions-container { display: flex; gap: 8px; padding: 10px 15px; overflow-x: auto; background: #1c2630; border-top: 1px solid #333; scrollbar-width: thin; }
        .suggestion-chip { background: rgba(0,123,255,0.1); color: #007bff; border: 1px solid #007bff; border-radius: 20px; padding: 8px 15px; font-size: 0.85rem; cursor: pointer; white-space: nowrap; }
        .chat-input { display: flex; gap: 10px; padding: 15px; background: #0d141b; border-top: 1px solid #333; flex-shrink: 0; align-items: center; }
        .chat-input textarea { height: auto; min-height: 50px; max-height: 150px; width: 100%; border: none; outline: none; resize: none; background: #2c3e50; color: #fff; padding: 12px; border-radius: 10px; font-family: inherit; font-size: 0.95rem; overflow-y: hidden; }
        .chat-input textarea.scrolling { overflow-y: auto; }
        .chat-input span { color: #007bff; cursor: pointer; font-size: 1.3rem; display: flex; align-items: center; justify-content: center; width: 40px; height: 40px; }
        .recording { color: red !important; animation: pulse 1s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
        body.no-scroll { overflow: hidden !important; height: 100vh; }
        @media (max-width: 450px) { .chatbot-window { width: 95%; right: 2.5%; bottom: 20px; height: 80vh; } .chatbot-toggler { bottom: 20px; right: 20px; } }
/* === ØªØµÙ…ÙŠÙ… Ø§Ù„ÙƒØ§Ø±Øª Ø§Ù„Ù…Ø±Ø¨Ø¹ Ø§Ù„ØµØºÙŠØ± (Clickable) === */
.chat-property-box {
    display: block;
    background: #1c2630; /* Ù†ÙØ³ Ù„ÙˆÙ† Ø®Ù„ÙÙŠØ© Ø§Ù„Ø´Ø§Øª */
    border: 1px solid #333;
    border-radius: 12px;
    overflow: hidden;
    margin: 10px auto;
    width: 90%;
    max-width: 250px; /* Ø¹Ø±Ø¶ ØµØºÙŠØ± ÙˆÙ…Ù†Ø§Ø³Ø¨ */
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    text-decoration: none;
    color: #fff;
    transition: all 0.3s ease;
    position: relative;
    cursor: pointer;
}

/* ØªØ£Ø«ÙŠØ± Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø¹Ù†Ø¯ Ø§Ù„ÙˆÙ‚ÙˆÙ Ø¹Ù„ÙŠÙ‡ */
.chat-property-box:hover {
    transform: translateY(-3px);
    border-color: #007bff; /* Ø¨Ø±ÙˆØ§Ø² Ø£Ø²Ø±Ù‚ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ */
    box-shadow: 0 0 15px rgba(0, 123, 255, 0.2);
}

.chat-box-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px 12px;
    border-bottom: 1px solid #2c3e50;
    background: rgba(255,255,255,0.03);
}

.title-text {
    margin: 0;
    font-size: 0.95rem;
    font-weight: bold;
    color: #fff;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 70%;
}

.title-tag {
    background: #FFD700;
    color: #000;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 0.75rem;
    font-weight: bold;
}

.chat-box-body {
    padding: 12px;
    text-align: center;
}

.price {
    font-size: 1.1rem;
    font-weight: bold;
    color: #4facfe;
    margin: 8px 0;
}

.specs {
    font-size: 0.8rem;
    color: #aaa;
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-bottom: 8px;
}

.cta {
    font-size: 0.8rem;
    color: #28a745;
    font-weight: bold;
    margin-top: 5px;
}
    </style>

    <script>
        window.onload = function() {
            var expiryDate = new Date('2026-03-03'); 
            var today = new Date();
            if (!localStorage.getItem('hidePromoForever') && !sessionStorage.getItem('hidePromoSession') && today < expiryDate) {
                document.getElementById('promoPopup').style.display = 'flex';
            }
        };
        function closePopup() {
            document.getElementById('promoPopup').style.display = 'none';
            if (document.getElementById('dontShowAgain').checked) localStorage.setItem('hidePromoForever', 'true');
            else sessionStorage.setItem('hidePromoSession', 'true');
        }

        const chatInput = document.querySelector("#userMessage");
        const sendChatBtn = document.querySelector("#sendBtn");
        const chatbox = document.querySelector(".chatbox");
        const chatbotWindow = document.querySelector("#chatbotWindow");
        const micBtn = document.querySelector("#micBtn");
        const suggestionsBox = document.querySelector(".suggestions-container");
        let userMessage;

        const toggleChat = () => {
            chatbotWindow.classList.toggle("show-chat");
            document.body.classList.toggle("no-scroll");
        }

        chatInput.addEventListener("input", () => {
            chatInput.style.height = "auto";
            let scHeight = chatInput.scrollHeight;
            chatInput.style.height = `${scHeight}px`;
            if (scHeight > 150) chatInput.classList.add('scrolling');
            else chatInput.classList.remove('scrolling');
        });

        const startVoiceInput = () => {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (!SpeechRecognition) return alert("Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ØµÙˆØª");
            const recognition = new SpeechRecognition();
            recognition.lang = 'ar-EG';
            recognition.onstart = () => { micBtn.classList.add("recording"); chatInput.placeholder = "ØªØ­Ø¯Ø«..."; };
            recognition.onend = () => { micBtn.classList.remove("recording"); chatInput.placeholder = "Ø§ÙƒØªØ¨..."; };
            recognition.onresult = (e) => {
                chatInput.value = e.results[0][0].transcript;
                chatInput.dispatchEvent(new Event('input'));
            };
            recognition.start();
        }

        const sendSuggestion = (text) => {
            chatInput.value = text;
            chatInput.dispatchEvent(new Event('input'));
            handleChat();
        }

        const formatMessage = (text) => {
            let formatted = text.replace(/(https?:\/\/[^\s)\]]+)/g, '<a href="$1" target="_blank">$1</a>');
            formatted = formatted.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            formatted = formatted.replace(/\n/g, '<br>');
            return formatted;
        }

        const createChatLi = (message, className) => {
            const chatLi = document.createElement("li");
            chatLi.classList.add("chat", className);
            let chatContent = className === "incoming" ? `<span class="bot-icon"><img src="logo.png" alt="Bot"></span><p></p>` : `<p></p>`;
            chatLi.innerHTML = chatContent;
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… innerHTML Ø¹Ø´Ø§Ù† ÙŠØ¹Ø±Ø¶ Ø§Ù„ÙƒØ§Ø±Øª ØµØ­
            chatLi.querySelector("p").innerHTML = className === "outgoing" ? message : formatMessage(message);
            return chatLi;
        }

        const generateResponse = async (incomingChatLi) => {
            const messageElement = incomingChatLi.querySelector("p");
            try {
                const response = await fetch("/api/chat", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ message: userMessage })
                });
                const data = await response.json();
                messageElement.innerHTML = formatMessage(data.reply);
            } catch (error) { messageElement.textContent = "Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„"; }
            chatbox.scrollTo(0, chatbox.scrollHeight);
        }

        const handleChat = () => {
            userMessage = chatInput.value.trim();
            if(!userMessage) return;

            if(suggestionsBox) suggestionsBox.style.display = "none";

            chatbox.appendChild(createChatLi(userMessage, "outgoing"));
            chatbox.scrollTo(0, chatbox.scrollHeight);
            chatInput.value = "";
            chatInput.style.height = "auto";
            setTimeout(() => {
                const incomingChatLi = createChatLi("...", "incoming");
                chatbox.appendChild(incomingChatLi);
                chatbox.scrollTo(0, chatbox.scrollHeight);
                generateResponse(incomingChatLi);
            }, 600);
        }

        sendChatBtn.addEventListener("click", handleChat);
        chatInput.addEventListener("keydown", (e) => {
            if(e.key === "Enter" && !e.shiftKey) { e.preventDefault(); handleChat(); }
        });

        // Ø³ÙƒØ±Ø¨ØªØ§Øª Ø§Ù„ØªØ«Ø¨ÙŠØª
        let deferredPrompt;
        const installToast = document.getElementById('install-toast');
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault(); deferredPrompt = e;
            if (!localStorage.getItem('installPromptDismissed')) installToast.style.display = 'flex';
        });
        document.getElementById('install-btn-action')?.addEventListener('click', async () => {
            if (deferredPrompt) { deferredPrompt.prompt(); deferredPrompt = null; installToast.style.display = 'none'; }
        });
        document.getElementById('close-install')?.addEventListener('click', () => {
            installToast.style.display = 'none'; localStorage.setItem('installPromptDismissed', 'true');
        });
        
        document.addEventListener('DOMContentLoaded', () => {
            const isIos = /iPhone|iPad|iPod/.test(navigator.userAgent) && !window.MSStream;
            const isStandalone = window.navigator.standalone || (window.matchMedia('(display-mode: standalone)').matches);
            if (isIos && !isStandalone && !localStorage.getItem('iosPromptDismissed')) {
                setTimeout(() => { document.getElementById('ios-install-prompt').style.display = 'flex'; }, 3000);
            }
        });
        window.closeIosPrompt = () => {
            document.getElementById('ios-install-prompt').style.display = 'none';
            localStorage.setItem('iosPromptDismissed', Date.now());
        };
    </script>
    
    <script src="home.js"></script>
    <script src="search-handler.js"></script>
    <script src="guest.js"></script>
    <script src="utils.js"></script>
    <script src="app.js"></script>
    <script src="reload.js"></script>
    <script src="ban-check.js"></script>
    <script src="global-alert.js"></script>
    <button onclick="openComplaintModal()" class="complaint-float-btn">
    <i class="fas fa-exclamation-circle"></i> Ø¹Ù†Ø¯Ùƒ Ø´ÙƒÙˆÙ‰ØŸ
</button>

<div id="complaint-modal" class="popup-overlay" style="display: none;">
    <div class="popup-content neon-glow" style="max-width: 400px; border-color: #ff4444;">
        <span class="close-btn" onclick="closeComplaintModal()" style="position:absolute; top:10px; left:15px; cursor:pointer; font-size:1.5rem;">&times;</span>
        
        <div style="text-align: center; margin-bottom: 15px;">
            <i class="fas fa-headset" style="font-size: 3rem; color: #ff4444;"></i>
            <h3 style="color: white; margin-top: 10px;">Ø¥Ø±Ø³Ø§Ù„ Ø´ÙƒÙˆÙ‰ Ù„Ù„Ø¥Ø¯Ø§Ø±Ø©</h3>
            <p style="color: #ccc; font-size: 0.9rem;">ÙˆØ§Ø¬Ù‡ØªÙƒ Ù…Ø´ÙƒÙ„Ø©ØŸ Ø§ÙƒØªØ¨Ù„Ù†Ø§ ÙˆÙ‡Ù†Ø­Ù„Ù‡Ø§ ÙÙˆØ±Ø§Ù‹.</p>
        </div>

        <form id="user-complaint-form">
            <div class="input-group full-width">
                <textarea id="complaint-text" class="neon-input-white" rows="4" placeholder="Ø§ÙƒØªØ¨ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø´ÙƒÙˆÙ‰ Ù‡Ù†Ø§..." required style="background: #222; border-color: #555;"></textarea>
            </div>
            <button type="submit" class="btn-neon-auth" style="width: 100%; border-color: #ff4444; color: #ff4444;">
                <i class="fas fa-paper-plane"></i> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø´ÙƒÙˆÙ‰
            </button>
        </form>
    </div>
</div>

<style>
    /* ØªÙ†Ø³ÙŠÙ‚ Ø²Ø± Ø§Ù„Ø´ÙƒÙˆÙ‰ Ø§Ù„Ø¹Ø§Ø¦Ù… */
    .complaint-float-btn {
        position: fixed;
        bottom: 20px;
        left: 20px; /* Ø¹Ù„Ù‰ Ø§Ù„Ø´Ù…Ø§Ù„ Ø¹Ø´Ø§Ù† Ù…ÙŠØªØ¹Ø§Ø±Ø¶Ø´ Ù…Ø¹ Ø§Ù„Ø´Ø§Øª Ø¨ÙˆØª */
        background: rgba(255, 68, 68, 0.1);
        color: #ff4444;
        border: 1px solid #ff4444;
        padding: 10px 20px;
        border-radius: 50px;
        font-weight: bold;
        cursor: pointer;
        z-index: 9999;
        transition: 0.3s;
        backdrop-filter: blur(5px);
        box-shadow: 0 0 10px rgba(255, 68, 68, 0.2);
    }
    .complaint-float-btn:hover {
        background: #ff4444;
        color: white;
        transform: translateY(-3px);
        box-shadow: 0 0 20px rgba(255, 68, 68, 0.6);
    }
</style>

<script>
    // Ø¯ÙˆØ§Ù„ ÙØªØ­ ÙˆØºÙ„Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
    function openComplaintModal() {
        document.getElementById('complaint-modal').style.display = 'flex';
    }
    function closeComplaintModal() {
        document.getElementById('complaint-modal').style.display = 'none';
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø´ÙƒÙˆÙ‰
    document.getElementById('user-complaint-form').addEventListener('submit', async (e) => {
        e.preventDefault();
        const btn = e.target.querySelector('button');
        const originalText = btn.innerHTML;
        const text = document.getElementById('complaint-text').value;

        btn.innerHTML = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';
        btn.disabled = true;

        try {
            const res = await fetch('/api/submit-complaint', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ content: text })
            });
            
            const data = await res.json();

            if(res.ok) {
                alert('âœ… ' + data.message);
                document.getElementById('complaint-text').value = '';
                closeComplaintModal();
            } else {
                if(res.status === 401) alert('ÙŠØ¬Ø¨ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø£ÙˆÙ„Ø§Ù‹ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø´ÙƒÙˆÙ‰.');
                else alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£: ' + data.message);
            }
        } catch(err) {
            alert('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„.');
        } finally {
            btn.innerHTML = originalText;
            btn.disabled = false;
        }
    });
</script>
</body>
</html>