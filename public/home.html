<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>ุนูุงุฑู - ุงูุฑุฆูุณูุฉ</title>
    <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1c2630">
<link rel="apple-touch-icon" href="logo.jpg">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <header class="main-header">
        <div class="header-container">
            <div class="logo-container">
                <button id="install-btn" class="btn-neon-auth" style="display: none; margin: 10px auto; background: #28a745;">
    <i class="fas fa-download"></i> ุชุซุจูุช ุงูุชุทุจูู
</button>
                <img src="logo.jpg" alt="ุดุนุงุฑ ุนูุงุฑู" class="logo">
                <span class="logo-text">ุนูุงุฑู ูุถููู!</span>
            </div>

            <nav class="main-nav">
            <div id="guest-nav" style="display: none;">
                <a href="index?mode=login" class="nav-button neon-button-white">ุชุณุฌูู ุงูุฏุฎูู</a>
                <a href="index" class="nav-button neon-button-white">ุฅูุดุงุก ุญุณุงุจ</a>
            </div>

            <div id="user-nav" style="display: none;">
            <nav class="main-nav">
                <a href="all-properties" class="nav-button neon-button-white">ุฌููุน ุงูุนูุงุฑุงุช</a>
                <a href="buy" class="nav-button neon-button-white">ุดุฑุงุก</a>
                <a href="rent" class="nav-button neon-button-white">ุงูุฌุงุฑ</a>
                <a href="user-dashboard" class="nav-button neon-button-white">ุญุณุงุจู</a> 
                <a href="seller-dashboard" class="sell-btn">ุงุนุฑุถ ุนูุงุฑ ููุจูุน!</a>
                </nav>
            </div>

        </div>
    </header>

    <main class="main-content">
        <section class="search-section">
            <div class="search-bar-container">
                <input type="text" class="search-bar neon-input-white" placeholder="ุงุจุญุซ ุนู ุนูุงุฑู (ุงูุงุณูุ ุงูุณุนุฑุ ุงูุบุฑู)...">
                <button class="search-button"><i class="fas fa-search"></i> ุงุจุญุซ</button>
            </div>
        </section>

        <section class="listings-section">
            <h2 class="section-title">ุฃุญุฏุซ ุงูุนูุงุฑุงุช</h2>
            <div class="listings-container" id="listings-container">
            </div>
        </section>
        
        <section class="request-property-section">
            <div class="request-box neon-glow centered-page-content">
                <p class="request-text">ูู ุชุฌุฏ ุงูุนูุงุฑ ุงูุฐู ุชุจุญุซ ุนููุ</p>
                <a href="request-property" class="btn-neon-large">ุงุญุฌุฒ ุนูุงุฑู ุงูุขู!</a>
            </div>
        </section>

        <div id="help-modal" class="modal-overlay" style="display: none;">
    <div class="modal-content neon-glow">
        <span class="close-modal">&times;</span>
        <h2 class="modal-title">ููู ูุนูู <span style="color: var(--primary-color);">ุนูุงุฑู</span>ุ ๐</h2>
        
        <div class="gallery-container">
            
            <div class="gallery-card">
                <div class="image-box">
                    <img src="auth.png" alt="ุฅูุดุงุก ุญุณุงุจ">
                    <div class="step-number">1</div>
                </div>
                <div class="text-box">
                    <h3>ุฃูุดุฆ ุญุณุงุจู</h3>
                    <p>ุณุฌู ุฏุฎููู ูุฌุงูุงู ูุชุชููู ูู ุนุฑุถ ุชูุงุตูู ุงูุจุงุฆุนูู ูุงูุชูุงุตู ูุนูู.</p>
                </div>
            </div>

            <div class="gallery-card">
                <div class="image-box">
                    <img src="book.png" alt="ุญุฌุฒ ุนูุงุฑ">
                    <div class="step-number">2</div>
                </div>
                <div class="text-box">
                    <h3>ุงุญุฌุฒ ุนูุงุฑู</h3>
                    <p>ุงุทูุจ ุนูุงุฑุงู ุจููุงุตูุงุช ูุญุฏุฏุฉ ูุณูุฎุจุฑู ููุฑ ุชููุฑู.</p>
                </div>
            </div>

            <div class="gallery-card">
                <div class="image-box">
                    <img src="details.png" alt="ุชูุงุตูู ุงูุนูุงุฑ">
                    <div class="step-number">3</div>
                </div>
                <div class="text-box">
                    <h3>ุดุงูุฏ ุชูุงุตูู ุงูุนูุงุฑ</h3>
                    <p>ุชุตูุญ ุงูุตูุฑ ูุงูุชูุงุตููุ ูุฃุถู ุงูุนูุงุฑุงุช ุฅูู ุงูููุถูุฉ ููุฑุฌูุน ุฅูููุง ูุงุญูุงู.</p>
                </div>
            </div>

            <div class="gallery-card">
                <div class="image-box">
                    <img src="sell.png" alt="ุจูุน ุนูุงุฑ">
                    <div class="step-number">4</div>
                </div>
                <div class="text-box">
                    <h3>ุงุนุฑุถ ุนูุงุฑู</h3>
                    <p>ุตูุฑ ุนูุงุฑู ูุงุฑูุน ุงูุฅุนูุงู ูู ุฏูุงุฆูุ ูุณูุธูุฑ ูู ุฃุญุฏุซ ุงูุนูุงุฑุงุช.</p>
                </div>
            </div>

        </div>
    </div>
</div>

    </main>

    <footer class="main-footer">
        <div class="footer-content">
            <div class="social-links">
                <a href="https://www.facebook.com/share/17H591aR7r/" title="ููุณุจูู" target="_blank"><i class="fab fa-facebook-f"></i></a>
                <a href="https://www.instagram.com/aqarak.eg?igsh=ZHZhd2U0NTg4MzAy" title="ุงูุณุชุฌุฑุงู" target="_blank"><i class="fab fa-instagram"></i></a>
                <a href="https://whatsapp.com/channel/0029Vb6YH08CxoAoe7aaSP38" title="ูุงุชุณุงุจ" target="_blank"><i class="fab fa-whatsapp"></i></a>
            </div>
            <p class="contact-info">ุชูุงุตููุง ูุนูุง!</p>
            <p>ุฌููุน ุงูุญููู ูุญููุธุฉ ยฉ 2025 - ุนูุงุฑู</p>
        </div>
    </footer>
   <script>
    document.addEventListener('DOMContentLoaded', () => {
        // 1. ูุญุต ุญุงูุฉ ุงููุณุชุฎุฏู
        const userRole = localStorage.getItem('userRole');
        const isLoggedIn = userRole !== null; // true ูู ูุณุฌูุ false ูู ุฒุงุฆุฑ

        // 2. ุงูุชุญูู ูู ุงูููุฏุฑ (ุฅุธูุงุฑ/ุฅุฎูุงุก ุงูููุงุฆู)
        const guestNav = document.getElementById('guest-nav');
        const userNav = document.getElementById('user-nav');

        if (isLoggedIn) {
            // ุญุงูุฉ: ูุณุฌู ุฏุฎูู
            if (userNav) userNav.style.display = 'flex';
            if (guestNav) guestNav.style.display = 'none';
        } else {
            // ุญุงูุฉ: ุฒุงุฆุฑ (Guest)
            if (userNav) userNav.style.display = 'none';
            if (guestNav) guestNav.style.display = 'flex';
        }

        // 3. ููุทู ุชุณุฌูู ุงูุฎุฑูุฌ (Logout)
        const logoutBtn = document.getElementById('logout-btn');
        if (logoutBtn) {
            logoutBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (confirm('ูู ุชุฑูุฏ ุชุณุฌูู ุงูุฎุฑูุฌุ')) {
                    localStorage.clear(); // ูุณุญ ุงูุจูุงูุงุช
                    window.location.reload(); // ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ (ุณูุชุญูู ูุฒุงุฆุฑ)
                }
            });
        }

        // 4. ุญูุงูุฉ ุฃุฒุฑุงุฑ "ุนุฑุถ ุงูุชูุงุตูู" (ุชุชุทูุจ ุชุณุฌูู)
        // ูุณุชุฎุฏู Event Delegation ุนุดุงู ูุดุชุบู ุญุชู ูู ุงูุนูุงุตุฑ ุงุชุฑุณูุช ุจุนุฏูู
        document.body.addEventListener('click', (e) => {
            // ูู ุถุบุท ุนูู ุฒุฑุงุฑ ูุงุฎุฏ ููุงุณ view-details-btn
            if (e.target.closest('.view-details-btn')) {
                if (!isLoggedIn) {
                    e.preventDefault(); // ููุน ูุชุญ ุงูุตูุญุฉ
                    e.stopPropagation();
                    
                    // ุฑุณุงูุฉ ุชูุฌูู
                    if(confirm('ุนููุงูุ ูุฌุจ ุนููู ุชุณุฌูู ุงูุฏุฎูู ุฃููุงู ูุนุฑุถ ุชูุงุตูู ุงูุนูุงุฑ ูุงูุชูุงุตู ูุน ุงูุจุงุฆุน.\nูู ุชุฑูุฏ ุงูุงูุชูุงู ูุตูุญุฉ ุงูุชุณุฌููุ')) {
                        window.location.href = 'index';
                    }
                }
            }
        });
    });
</script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
    // ุชุนุฑูู ุงูุนูุงุตุฑ
    const helpBtn = document.getElementById('help-btn');
    const helpModal = document.getElementById('help-modal');
    const closeModal = document.querySelector('.close-modal');

    // ูุชุญ ุงููุงูุฐุฉ
    if (helpBtn) {
        helpBtn.addEventListener('click', (e) => {
            e.preventDefault();
            helpModal.style.display = 'flex';
        });
    }

    // ุฅุบูุงู ุงููุงูุฐุฉ ุนูุฏ ุงูุถุบุท ุนูู X
    if (closeModal) {
        closeModal.addEventListener('click', () => {
            helpModal.style.display = 'none';
        });
    }

    // ุฅุบูุงู ุงููุงูุฐุฉ ุนูุฏ ุงูุถุบุท ูู ุฃู ููุงู ุฎุงุฑุฌ ุงูุตูุฏูู
    window.addEventListener('click', (e) => {
        if (e.target === helpModal) {
            helpModal.style.display = 'none';
        }
    });
});
    </script>
    <script src="home.js"></script>
    <script src="search-handler.js"></script>
    <script src="utils.js"></script>
    <script src="app.js"></script>
    <a href="#" id="help-btn" class="floating-help-btn" title="ููู ูุนูู ุงููููุนุ">
    <i class="fas fa-question"></i>
    <span class="ripple"></span> </a>
    <script>
        let deferredPrompt;
const installBtn = document.getElementById('install-btn');

window.addEventListener('beforeinstallprompt', (e) => {
    // 1. ููุน ุธููุฑ ุงููุงูุฐุฉ ุงูุชููุงุฆูุฉ ุงููุฏููุฉ
    e.preventDefault();
    // 2. ุญูุธ ุงูุญุฏุซ ูุงุณุชุฎุฏุงูู ูุงุญูุงู
    deferredPrompt = e;
    // 3. ุฅุธูุงุฑ ุฒุฑ ุงูุชุซุจูุช ุงูุฎุงุต ุจูุง
    if(installBtn) installBtn.style.display = 'block';
});

if(installBtn) {
    installBtn.addEventListener('click', async () => {
        if (deferredPrompt) {
            // 4. ุฅุธูุงุฑ ูุงูุฐุฉ ุงูุชุซุจูุช ุงูุฃุตููุฉ
            deferredPrompt.prompt();
            // 5. ุงูุชุธุงุฑ ุฑุฏ ุงููุณุชุฎุฏู
            const { outcome } = await deferredPrompt.userChoice;
            console.log(`User response: ${outcome}`);
            // 6. ุฅุฎูุงุก ุงูุฒุฑ ูุชุตููุฑ ุงูุญุฏุซ
            deferredPrompt = null;
            installBtn.style.display = 'none';
        }
    });
}
    </script>

    <script>
     // --- ููุฏ ุฎุงุต ูุฃุฌูุฒุฉ ุงูุขูููู (iOS Install Prompt) ---
document.addEventListener('DOMContentLoaded', () => {
    // 1. ูู ุงูุฌูุงุฒ iOSุ
    const isIos = /iPhone|iPad|iPod/.test(navigator.userAgent) && !window.MSStream;
    
    // 2. ูู ุงูุชุทุจูู ูุซุจุช ุจุงููุนู (Standalone)ุ
    const isStandalone = window.navigator.standalone || (window.matchMedia('(display-mode: standalone)').matches);

    // 3. โ ูู ุงููุณุชุฎุฏู ุฃุบูู ุงูุฑุณุงูุฉ ูุฑูุจุงูุ (ูุญุต ุงูุฐุงูุฑุฉ)
    const lastDismissed = localStorage.getItem('iosPromptDismissed');
    const now = Date.now();
    // ูุฏุฉ ุงูุฅุฎูุงุก: 7 ุฃูุงู (ุจุงููููู ุซุงููุฉ)
    const hideDuration = 7 * 24 * 60 * 60 * 1000; 

    // ุงูุดุฑุท ุงููุงูู ููุธููุฑ:
    // (ูู ุขูููู) ู (ูุด ูุซุจุช ุงูุชุทุจูู) ู (ูุนุฏุงุด 7 ุฃูุงู ุนูู ุขุฎุฑ ูุฑุฉ ููู ุงูุฑุณุงูุฉ)
    if (isIos && !isStandalone && (!lastDismissed || (now - lastDismissed > hideDuration))) {
        
        const iosPrompt = document.getElementById('ios-install-prompt');
        if (iosPrompt) {
            // ุฅุธูุงุฑ ุงูุฑุณุงูุฉ ุจุนุฏ 3 ุซูุงูู ุนุดุงู ููุญู ูุดูู ุงููููุน ุงูุฃูู
            setTimeout(() => {
                iosPrompt.style.display = 'flex';
            }, 3000);
        }
    }
});

// ุฏุงูุฉ ุฅุบูุงู ุฑุณุงูุฉ ุงูุขูููู (ูุน ุงูุญูุธ ูู ุงูุฐุงูุฑุฉ)
window.closeIosPrompt = () => {
    document.getElementById('ios-install-prompt').style.display = 'none';
    
    // โ ุชุณุฌูู ููุช ุงูุฅุบูุงู ุงูุญุงูู
    localStorage.setItem('iosPromptDismissed', Date.now());
};
    </script>

    <div id="ios-install-prompt" class="ios-prompt" style="display: none;">
    <div class="ios-prompt-content">
        <span class="close-ios" onclick="closeIosPrompt()">&times;</span>
        <p style="margin: 0; font-weight: bold; font-size: 0.9rem;">ุชุซุจูุช ุชุทุจูู ุนูุงุฑู ๐ฑ</p>
        <p style="margin: 5px 0 0; font-size: 0.85rem; color: #ddd;">
            ูุชุซุจูุช ุงูุชุทุจูู ุนูู ุงูุขูููู:<br>
            1. ุงุถุบุท ุนูู ุฒุฑ <strong>ูุดุงุฑูุฉ</strong> <i class="fas fa-share-square" style="color: #007aff;"></i> ุจุงูุฃุณูู.<br>
            2. ุงุฎุชุฑ <strong>"ุฅุถุงูุฉ ุฅูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ"</strong> <i class="fas fa-plus-square"></i>.
        </p>
    </div>
    <div class="ios-arrow"></div>
</div>
</body>
</html>