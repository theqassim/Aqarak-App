<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <script src="auth-guard.js"></script>
     <script src="admin-auth.js"></script>
    <title>عقارك - تعديل ومسح العقارات</title>
    <link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#1c2630">
<link rel="apple-touch-icon" href="logo.jpg">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="internal-page">

    <header class="main-header">
        <div class="header-container">
            <div class="logo-container">
                <img src="logo.jpg" alt="شعار عقارك" class="logo">
                <span class="logo-text">مسح وتعديل (Admin)</span>
                 <nav class="main-nav">
                <a href="admin-home" class="nav-button neon-button-white">العودة</a> 
            </nav>
            </div>
        </div>
    </header>

    <main class="main-content">
        <h1 class="page-title">البحث وتعديل العقارات المنشورة</h1>

        <div class="search-box neon-glow centered-page-content" style="max-width: 600px;">
            <h2>البحث بالكود السري</h2>
            <p id="search-message" class="message"></p>
            <form id="search-property-form" class="auth-form">
                <div class="input-group">
                    <label for="search-code">الكود السري للعقار</label>
                    <input type="text" id="search-code" class="neon-input-white" required>
                </div>
                <button type="submit" class="btn-neon-auth"><i class="fas fa-search"></i> بحث</button>
            </form>
        </div>
        
        <div id="property-edit-area" style="display:none; margin-top: 30px;">
            <div class="seller-form-container neon-glow centered-page-content" style="max-width: 800px;">
                <h2>تعديل العقار: <span id="edit-property-title"></span></h2>
                <p id="edit-form-message" class="message"></p>
                <form id="edit-property-form" enctype="multipart/form-data">
                    <input type="hidden" id="edit-property-id">

                    <div class="form-grid">
                        <div class="input-group">
                            <label for="edit-title">عنوان العقار</label>
                            <input type="text" id="edit-title" name="title" class="neon-input-white" required>
                        </div>
                        <div class="input-group">
                            <label for="edit-hidden-code">الكود السري</label>
                            <input type="text" id="edit-hidden-code" name="hiddenCode" class="neon-input-white" required>
                        </div>
                        <div class="input-group">
                            <label for="edit-price">السعر المطلوب (جنيه)</label>
                            <input type="text" id="edit-price" name="price" class="neon-input-white" required>
                        </div>
                        <div class="input-group">
                            <label for="edit-type">نوع العرض</label>
                            <select id="edit-type" name="type" class="neon-input-white" required>
                                <option value="بيع">بيع</option>
                                <option value="إيجار">إيجار</option>
                            </select>
                        </div>
                        <div class="input-group">
                            <label for="edit-area">المساحة (م²)</label>
                            <input type="number" id="edit-area" name="area" class="neon-input-white" min="1" required>
                        </div>
                        <div class="input-group">
                            <label for="edit-rooms">عدد الغرف</label>
                            <input type="number" id="edit-rooms" name="rooms" class="neon-input-white" min="1" required>
                        </div>
                        <div class="input-group">
                            <label for="edit-bathrooms">عدد الحمامات</label>
                            <input type="number" id="edit-bathrooms" name="bathrooms" class="neon-input-white" min="1" required>
                        </div>
                    </div>

                    <div class="input-group full-width">
                        <label for="edit-description">وصف تفصيلي للعقار</label>
                        <textarea id="edit-description" name="description" rows="5" class="neon-input-white"></textarea>
                    </div>

                    <div class="input-group full-width">
                        <label>الصور الحالية (يمكنك مسحها أو إضافة المزيد)</label>
                        <div class="image-preview-container existing-images" id="existing-images-container">
                            </div>
                        <input type="hidden" name="existingImages" id="existing-images-data">

                        <label for="edit-images" class="file-upload-label btn-neon-auth" style="margin-top: 15px;">
                            <i class="fas fa-upload"></i> إضافة صور جديدة
                        </label>
                        <input type="file" id="edit-images" name="propertyImages" multiple accept="image/*" style="display:none;">
                    </div>
                    
                    <button type="submit" class="btn-neon-auth"><i class="fas fa-save"></i> حفظ التعديلات</button>
                    <button type="button" class="btn-neon-red" id="delete-property-btn"><i class="fas fa-trash"></i> مسح العقار نهائياً</button>
                </form>
            </div>
        </div>
    </main>

    <script src="dash.js"></script>
    <script src="logout.js"></script>
    <script src="utils.js"></script>
    <script src="admin-edit.js"></script>
    <script src="app.js"></script>
</body>
</html>